---
title: "예전에 게임쪽에 있던 분과 일할 기회가 있었는데 같이 디비설계를 하면서 게임쪽은 FK를 잘 안건다는 이야기를 들었다."
description: "높은 쓰기 빈도에서 FK를 덜 쓰는 선택과, 그래도 기본값은 FK여야 하는 이유를 트레이드오프로 정리했다."
pubDate: 2025-02-01T02:03:16+00:00
source: twitter
tags:
  - database
  - fk
  - erd
  - tradeoff
---

예전에 게임 도메인 출신 동료와 DB 설계를 같이 하면서 “게임 쪽은 FK를 잘 안 건다”는 말을 들었다. 그때는 잘 이해되지 않았다. 무결성은 DB가 맡는 게 당연하다고 생각했기 때문이다. 그런데 시간이 지나고 보니, 쓰기 빈도가 높은 환경에서는 FK 제약 검사 자체가 비용이 될 수 있다는 맥락이 있었다.

그렇다고 FK를 쉽게 빼자는 얘기는 아니다. 내 기본값은 여전히 초반부터 FK를 쓰는 쪽이다. DB가 제약을 처리해 주는 기본 기능을 버리면, 같은 검증을 애플리케이션 코드나 배치로 옮겨 적는 경우가 많다. 그러면 중복 검증이 생기고, 실패 지점이 흩어지고, 수정할 때 확인해야 할 경계도 늘어난다.

FK를 포기하는 순간 논리 ERD와 물리 ERD 사이에 의도적인 간격이 생긴다. 그 간격은 결국 컨텍스트 비용이다. 왜 여기서는 DB 제약 대신 다른 계층에서 보완하는지, 누가 어떤 방식으로 정합성을 맞추는지 계속 설명하고 관리해야 한다. 어느 시점부터 이 선택이 유리한지에 대한 보편적인 수치나 임계점은, 이 맥락만으로는 단정하기 어렵다.

정리하면 기본은 FK이고, 예외는 이득이 비용을 분명히 넘을 때만 선택할 여지가 있다. 쓰기 패턴과 제약 비용을 먼저 보고, 정말 필요한 구간에서만 애플리케이션/배치 보완을 선택하는 게 현실적이다. 선택보다 중요한 건 제약을 옮긴 뒤의 운영 책임을 팀이 끝까지 감당할 수 있느냐다.
