---
title: "작은 단위로 PR을 만들어 그간의 변경 사항에 대해 클로드도 작업자도 컨텍스트를 클리어 하고 다시 1번에서 기록해둔 내용과 진척사"
description: 빅뱅 머지의 불안을 줄이기 위해 작은 PR과 컨텍스트 리셋을 반복하고, 의존성이 큰 초기 구간에서는 main 선행 작업이 더 안전했던 기준을 정리했다.
pubDate: 2024-08-19T09:59:38+00:00
source: twitter
tags:
  - engineering
  - workflow
  - pull-request
  - collaboration
---

한두 달 준비한 기능을 여는 시점은 늘 긴장됐다. 특히 40일 정도 쌓인 피처 브랜치를 한 번에 머지하는 날은 QA를 거쳤어도 불안이 남았다. 커밋 하나의 오류 가능성을 1%로 보더라도 100개가 모이면 오류가 있을 가능성이 63.4%라는 계산이 머릿속에서 계속 걸렸다. 결국 문제는 구현 난이도보다, 변경이 한 덩어리로 몰릴 때 팀이 감당해야 하는 불확실성이었다.

그래서 작업 단위를 먼저 바꿨다. 변경을 작은 PR로 끊고, 각 PR이 끝날 때마다 지금까지의 변경 사항과 진척을 짧게 기록했다. 다음 작업은 그 기록을 시작점으로 다시 진행했다. 클로드도 작업자도 컨텍스트를 비우고 동일한 기준선에서 재시작하는 방식이다. 이렇게 하면 이전 대화나 임시 기억에 덜 의존하게 되고, 어디까지 끝났는지 확인하는 비용이 줄어든다.

이 방식의 장점은 속도를 과장하지 않아도 안정성이 올라간다는 점이었다. 리뷰 범위가 좁아져 놓침이 줄고, 막판 변경이 들어와도 수습 경로를 잡기 쉬웠다. 실제로 마지막에 골치 아픈 변경이 섞였던 기능도 정리된 흐름 안에서 대응할 수 있었다. 다만 항상 병렬 작업이 좋은 건 아니었다. 초기 구간처럼 순차 의존성이 큰 일은 선발대 한둘이 main에 커밋하며 진도를 내는 편이 오히려 효율적이었다.

결국 핵심은 브랜치 전략을 고정 규칙처럼 쓰지 않는 것이다. 의존성이 높을 때는 병렬을 억지로 만들지 않고, 리스크가 커지는 지점부터 PR을 잘게 나눠 기록을 남긴다. 작은 PR, 짧은 진척 요약, 재시작 가능한 프롬프트를 한 세트로 운영하면 전달 속도와 머지 리스크 사이의 긴장을 관리하기 수월하다. 팀 규모나 정확한 기준선은 여기서 주어진 정보만으로 일반화하기 어렵기 때문에, 각 팀은 한 기능 단위로 먼저 실험해 기준을 맞추는 게 현실적이다.
