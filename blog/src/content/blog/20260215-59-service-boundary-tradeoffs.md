---
title: "오늘도 Django에 붙어있던 api한개 go로 뜯어옮겼다."
description: Django에서 Go로 API를 분리하며 정리한 서비스 경계 판단 기준과 운영 트레이드오프.
pubDate: 2024-08-28T11:55:59+00:00
source: twitter
tags:
  - architecture
  - django
  - go
  - msa
  - backend
---

요즘 API를 하나씩 Django에서 떼어 Go로 옮기고 있다. 출발점은 언어 선호가 아니었다. 초기엔 빠르게 붙인 구조가 커지면서 경계가 흐려졌고, 나뉜 것처럼 보여도 결국 한 번에 배포해야 하는 상태가 반복됐다. htmx 페이지를 JS 기반 서비스 안에 억지로 끼워 넣자는 논의까지 나오면, 스택보다 서비스 경계를 먼저 다시 봐야 한다는 신호라고 봤다.

실행은 작게 시작했다. Django에 붙어 있던 API 하나를 골라 로직을 Go로 옮기고, 기능 동작을 먼저 맞췄다. 레포가 작아서 전체 맥락을 한 번에 확인하기 쉬웠고, 보조 도구 도움을 크게 받아 직접 타이핑한 양은 많지 않았다. 다음 단계는 요청을 즉시 쓰지 않고 SQS 대기열에 모은 뒤 bulk insert로 처리하는 흐름을 붙이는 것이다. 개선 폭은 기대하지만, 아직은 검증 전 가설로 두고 있다.

옮기면서 분리가 주는 상쾌함은 분명했다. 동시에 운영 비용도 같이 올라갔다. 기존 프레임워크가 감싸주던 부분을 직접 구현해야 하는 구간이 늘어나기 때문이다. 그래서 “Go냐 Django냐”보다 “왜 지금 분리하느냐”가 더 중요했다. 목적이 성능 병목 해소, 장애 격리, 책임 소유권 정리가 아니라면 분리는 구조만 예쁘게 만들고 운영 표면적만 키우기 쉽다.

MSA도 같은 기준으로 본다. 도메인이 어느 정도 안정됐고 고가용성 요구가 크며, 도메인별 지식이 커져 한 사람이 종횡으로 다니기 어려운 상태라면 분리 이득이 커진다. 반대로 이 조건이 약한 단계에서 잘게 나누면 배포는 함께 하면서 복잡도만 오른다. 지금 내 기준은 단순하다. 실패 비용을 낮출 수 있는 작은 단위부터 옮기고, 효과가 확인된 경우에만 다음 경계를 자른다.
