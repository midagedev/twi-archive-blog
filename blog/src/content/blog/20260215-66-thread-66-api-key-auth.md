---
title: "팀원분이 스프링에 api key기반 auth하나 추가하는데 필터클래스니 유저디테일이니 몇개씩 만드는걸 보고 그럴리가 없다고 시큐리"
description: "스프링에서 API key 인증을 붙이며 느낀 구현 복잡도, 테스트 비용, 그리고 로직 분리 고민을 정리했다."
pubDate: "2025-11-05T13:24:38+00:00"
source: twitter
tags: ["spring", "django", "api-key-auth", "테스트", "설계"]
---

팀원이 스프링에 API key 기반 auth를 추가하는 과정을 보면서 먼저 든 생각은 “이 정도로 복잡할 일인가”였다. 필터 클래스, UserDetails 같은 요소를 몇 개씩 만드는 흐름을 보고, 나는 당연히 이미 있는 시큐리티 구현체가 있을 거라고 봤다. 그런데 끝내 딱 맞는 걸 찾지 못했다. 장고에서는 의존성 추가하고 설정에 넣으면 끝나던 작업이라, 같은 인증 하나인데 체감 난이도 차이가 크게 느껴졌다.

코드베이스를 조금씩 파악하면서 이 문제를 단일 기능 이슈로 보기 어렵다고 느꼈다. 같은 요구사항이라도 장고로 했으면 코드가 10%도 안 됐을 거라는 생각이 들었고, 생산성 차이는 테스트 시간에서 더 크게 드러났다. 테스트 하나 도는 데 1분씩 걸리니, 여기서 TDD를 하자고 말하는 것 자체가 부담이 된다.

그래서 고민은 “어떻게 더 빨리 만들까”보다 “무엇을 프레임워크 밖으로 빼야 하나”로 옮겨갔다. 비즈니스 로직을 플레인 자바로 분리하면 수정 비용과 피드백 시간을 낮출 수 있지 않을까 싶었다. 다만 이 스레드 기준으로는 실제로 어디까지 분리했는지는 확인되지 않는다.

정리하면, 기능 추가 시 구현 코드만 볼 게 아니라 필요한 클래스 수, 테스트 실행 시간, 프레임워크 결합도를 같이 봐야 한다. 개발 경험이 급격히 나빠지는 지점이 보이면, 기술 취향보다 경계 재설계를 먼저 검토하는 게 현실적인 대응이다.
