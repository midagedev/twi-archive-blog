---
title: 긴 AI 코딩 세션에서 품질을 지키는 운영 가드레일
description: 컨텍스트 열화와 환각을 줄이기 위해 세션 리셋, 검증 규칙, 병렬 작업 단위를 운영한 방식.
pubDate: 2023-04-14T04:42:10+00:00
source: twitter
tags:
  - ai-workflow
  - coding
  - guardrails
---

AI로 코딩을 오래 붙잡고 있으면 초반 생산성이 후반에 무너지는 구간이 온다. 대화가 길어질수록 모델이 맥락을 덜 정확하게 잡고, 워크스페이스를 읽는 듯하다가도 존재하지 않는 코드를 근거로 답을 이어가는 경우가 있었다. 같은 프롬프트도 리제너레이션마다 결론이 달라지기 때문에, 응답을 정답이 아니라 후보로 취급하는 전제가 먼저 필요했다.

그래서 세션을 길게 끌지 않는 규칙을 만들었다. 답변이 둔해졌다고 느껴지면 멈추고, 현재 상태를 `context.md`에 짧게 남긴 뒤 새 세션으로 넘어간다. 요약에는 목표, 이미 내린 결정, 미해결 이슈, 다음 액션만 넣었다. 세션 길이 제한 옵션은 도구마다 제공 여부와 위치가 달라서 확인이 필요하지만, 옵션 유무와 무관하게 리셋 시점을 명시하는 편이 안정적이었다.

환각 대응은 더 단순하게 갔다. 모델이 언급한 파일명, 함수명, 변경 내역은 바로 믿지 않고 먼저 존재 여부를 확인했다. 확인되지 않으면 해당 경로를 버리고 질문 범위를 다시 좁혔다. 또 모델마다 기본 컨텍스트 편향이 달라, 인프라 맥락이 강한 모델은 그 영역에서 장점이 있지만 일반 코딩에서는 미세한 어긋남이 생길 수 있었다. 이 차이를 성능 문제가 아니라 입력과 도메인 정렬 문제로 보는 게 실무에 맞았다.

토큰 여유가 있을 때는 병렬 서브에이전트 방식이 현실적이었다. 독립적인 조사 작업을 연도별이나 주제별로 나눠 동시에 돌리고, 마지막에 한 번만 취합했다. 대신 취합 형식을 미리 고정하지 않으면 결과가 다시 퍼져 검토 비용이 커졌다. 결국 긴 AI 코딩 세션의 핵심은 모델 자체보다 운영 가드레일이다. 세션 리셋 기준, 사실 검증 순서, 병렬 분할 단위를 먼저 정해두면 품질 저하를 훨씬 늦출 수 있다.
