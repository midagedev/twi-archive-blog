---
title: "후..."
description: 문법 변경으로 시작한 작업이 상태 리팩토링과 QA 회귀 대응으로 커졌을 때, 스코프를 다시 잡고 끝내는 방식을 정리한 기록.
pubDate: 2022-04-20T11:02:29+00:00
source: twitter
tags:
  - 개발
  - 마이그레이션
  - 리팩토링
  - QA
  - 스코프관리
---

svelte4에서 svelte5로 옮길 때 시작 가정은 단순했다. 문법만 맞추면 2~3일이면 끝난다고 봤다. 그런데 실제로는 꼬인 양방향 바인딩이 연쇄로 드러났고, 상태 변경 경로를 다시 정리하는 리팩토링까지 들어갔다. 작업은 10일 이상으로 늘어났고, 원인은 난이도보다 초기 스코프를 너무 좁게 잡은 데 있었다.

문제는 변환과 정리를 한 번에 묶은 판단이었다. 문법 호환만 목표로 두면 임시 패치로 지나갈 수 있지만, 상태 흐름이 모호한 코드에서는 그 패치가 다음 이슈를 만든다. 반대로 상태를 명확히 하려 들면 안정성은 올라가도 범위가 급격히 커진다. 당시에는 둘을 분리하지 못해 팀 피로가 먼저 쌓였다.

한 기능에 30시간을 쓰며 10시간짜리 구현을 두 번 버린 일도 같은 패턴이었다. 첫 시도는 머지하지 못하고 방치됐고, 두 번째는 만들고 나서 설계가 어색하다는 걸 알았다. 세 번째에서야 형태가 정리됐다. 많이 만드는 것보다 언제 버리고 어디서 고칠지 기준을 빨리 세우는 게 더 중요했다.

QA 구간에서는 회귀가 반복됐다. 하나를 고치면 예전에 되던 것이 다시 깨져 확인과 수정이 일주일 가까이 이어졌다. 머지는 늦어지고, 개발자는 확신이 줄고, QA는 검증 부담이 커진다. 트윗 기록만으로 세부 원인까지 단정할 수는 없지만, 변경 단위가 큰 상태에서 기준이 늦게 고정되면 같은 문제가 반복된다는 점은 분명했다.

지금은 비슷한 작업을 잡으면 경계부터 나눈다. 문법 마이그레이션 PR과 상태 리팩토링 PR을 분리하고, 이번 단계에서 하지 않을 범위를 먼저 적는다. QA 전에 기존 동작 체크리스트를 짧게 고정해 회귀 판단 기준도 맞춘다. 초반 속도는 느려져도 전부 다시 만드는 시간을 줄이면 전체 리드타임과 팀 소모가 내려간다.
