---
title: "개발에 코딩이 병목이 아니라는 것과 비슷한 맥락으로 쿼리속도가 개발/서비스의 병목인 경우도 잘 없다."
description: "쿼리 속도 집착보다 실제 병목을 확인하고, ORM과 데이터 저장소 선택을 사업 영향 기준으로 판단한 경험을 정리했다."
pubDate: 2024-10-24T15:34:19+00:00
source: twitter
tags:
  - backend
  - database
  - orm
  - engineering
  - decision-making
---

개발에서 병목을 물으면 코딩 속도나 쿼리 속도부터 지목하기 쉽다. 하지만 실무에서는 둘 다 핵심 병목이 아닌 경우가 많다. 지난 2년간 main 브랜치 Python 코드 라인은 거의 선형으로 늘었고 커미터도 대체로 12~15명 수준이었다. 그런데 코드량 증가가 매출이나 순익 증가로 바로 이어졌다고 말하기는 어렵다. 코드와 쿼리의 미세 속도만으로 성과가 결정되지는 않는다.

초기에는 검색어 히스토리를 형태소로 나눠 many-to-many 테이블을 만들고, 조회 때도 형태소 `IN` 조건을 걸었다. 인덱싱을 제대로 이해한 건 훨씬 뒤였다. 지금 보면 문제는 단순한 속도보다 데이터 모델과 접근 패턴의 유지 비용이었다. ORM도 같은 기준으로 봐야 한다. 특히 Django ORM은 이 맥락에서 팀 생산성을 높이는 선택이 될 때 가치가 크다. 먼저 변경 비용을 안정시키고, 실제 병목이 확인되면 그때 쿼리 경로를 좁혀 최적화하는 편이 낫다.

저장소 선택은 어려운 문제를 미루는 방식으로 작동할 때가 있다. MongoDB를 쓰면 초반 의사결정은 빨라져도 중후반에 엔지니어링 부담이 커지기 쉽다는 경험을 자주 본다. 그래서 기술 선택은 도입 이득만이 아니라 이후 운영 비용까지 같이 계산해야 한다. 특히 개발 맥락이 약한 조직에서는 이 설명이 더 어렵다. 그럴수록 “일단 인덱스” 같은 반사적 처방을 경계해야 한다.

결국 기준은 사업 영향이다. 먼저 어디가 실제 병목인지 확인하고, 쿼리 최적화는 측정 근거가 있을 때만 집행한다. ORM 사용 여부도 성능 신념이 아니라 수정 속도, 장애 대응, 데이터 일관성 비용으로 판단한다. 물론 트래픽 구조와 SLA에 따라 DB가 병목인 구간은 분명히 있다. 다만 그 예외를 기본값으로 두지 않으면, 과최적화 대신 결과에 가까운 결정을 더 자주 할 수 있다.
