---
title: "비정형데이터 검색이나 풀텍스트검색은 오케이 내가 어려웠던건 완전 정형데이터인 쇼핑몰 상품 같은것을 굳이 ES에 넣어 쓰면서 타임딜"
description: "정형 상품 데이터를 ES로 처리할 때 생긴 반영 지연과 운영 비용을 돌아본 기록."
pubDate: 2025-08-27T09:20:29+00:00
source: twitter
tags:
  - elasticsearch
  - rdb
  - ecommerce
  - search
---

비정형데이터 검색이나 풀텍스트검색에서는 ES가 분명히 역할이 있다. 문제는 쇼핑몰 상품처럼 완전 정형데이터까지 ES로 끌고 갔을 때였다. 타임딜 할인가, 실시간 베스트 같은 값이 곧바로 반영되지 않는 이슈를 계속 쫓아다니게 됐다. 안 되는 건 아니지만, 운영 난이도와 대응 비용이 빠르게 커졌다.

현장에서 체감한 기준은 단순했다. 11시에 오픈하는 상품은 11시에 보여야 하고, 11시부터 천 원 할인되면 가격순 정렬에서도 바로 보이게 해야 한다. RDB에서는 비교적 쉬운 요구다. 그런데 ES가 끼면 데이터 반영 경로를 다시 설계해야 했고, 이벤트소싱이나 어그리게이션 같은 추가 장치까지 들고 와야 했다.

결국 선택의 문제였다. ES를 잘 쓰면 구현은 가능하다. 다만 우리 상황에서는 그 복잡도를 감당하는 것보다 먼저 처리해야 할 일이 많았다. 핵심은 기술 스택을 멋지게 만드는 게 아니라, 상품 상태를 필요한 시점에 정확히 노출하는 일이었다. 그래서 정형 상태값과 검색 인덱스를 같은 문제로 다루지 않게 됐다.

이번에 남은 기준은 명확하다. 검색 품질 때문에 ES를 쓰는 판단과, 시간·가격처럼 즉시성이 필요한 정형 데이터를 ES 중심으로 운영하는 판단은 분리해야 한다. 기술의 우열보다 데이터 성격과 반영 시점 요구를 먼저 고정해야, 나중에 불필요한 복잡도와 낭비를 줄일 수 있다.
