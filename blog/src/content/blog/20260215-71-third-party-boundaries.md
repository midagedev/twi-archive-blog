---
title: "서비스에 고객행동 추적분석을 직접 개발을 통해 해보겠다는 과거의 포부를 접고 몇몇 기능들을 서드파티로 옮기기 시작했다."
description: "직접 구현을 줄이고 서드파티를 도입하면서 확인한 계약 가정, QA 함정, 운영 가드레일에 대한 기록."
pubDate: 2023-10-23T10:23:22+00:00
source: twitter
tags:
  - build-vs-buy
  - third-party
  - sendgrid
  - qa
  - 운영
---

예전에는 고객행동 추적과 분석을 서비스 안에서 직접 만들고 키우는 게 맞다고 봤다. 그런데 조직개편 이후 일을 다시 펼쳐 보니, 제품 가치보다 내가 붙잡고 있는 운영성 작업이 더 빠르게 늘고 있었다. 그래서 방향을 바꿨다. 몇몇 기능은 서드파티로 옮기고, 내가 반드시 책임져야 할 경계만 남기기로 했다. 시키는 일을 정확히 끝내는 데 집중하자는 기준도 이때 같이 세웠다.

이관은 기능 단위로 진행했다. 특히 대량 발송처럼 실수 한 번의 비용이 큰 영역은 직접 구현보다 검증된 외부 계약을 우선했다. 이메일은 SendGrid를 붙이면서 우리 쪽 가정도 다시 정리했다. 요청 크기 한도, 일괄 발송에서의 중복 처리, 실패 시 재시도 같은 항목을 코드보다 먼저 확인하고 테스트에 반영했다. API를 호출하면 우리가 기대한 대로만 동작할 거라는 전제를 버리는 게 시작이었다.

실제 운영에서는 예상 못 한 동작이 바로 나왔다. 한 번의 API 호출로 수십만 건을 보내려 하면 `request too large`가 떨어져 대형 오발송을 막아주는 보호장치가 있었다. 반대로 일괄 발송에 같은 메일을 여러 개 담으면 시스템이 합쳐서 한 건만 보내는 스펙도 있었다. 이건 QA와 반나절을 주고받은 뒤에야 확인했다. 일주일 준비한 피처는 배포했지만, 외부 서비스는 “되는지”보다 “어떻게 되는지”를 먼저 검증해야 한다는 비용을 분명히 배웠다.

지금은 서드파티 도입을 기능 추가가 아니라 운영 설계로 다룬다. 계약 가정은 테스트로 고정하고, 대량 작업에는 상한과 드라이런을 넣고, QA는 정상 경로보다 경계 케이스를 먼저 본다. 모든 걸 직접 만들겠다는 태도는 통제감을 주지만 유지비를 숨기기도 한다. 핵심 도메인에 집중하고 나머지는 명확한 가드레일 위에 올리는 편이, 팀 속도와 사고 복구 시간을 함께 지키는 선택이었다.
