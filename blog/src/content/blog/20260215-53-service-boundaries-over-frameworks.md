---
title: "이건 django의 문제가 아니다."
description: 프레임워크 선택보다 서비스 경계와 배포 단위를 먼저 정리해야 했던 경험을 정리했다.
pubDate: 2024-08-28T11:55:59+00:00
source: twitter
tags:
  - architecture
  - microservices
  - django
  - go
  - team-scaling
---

초기 프로젝트에서는 한 코드베이스에 기능을 모아도 잘 돌아간다. 문제는 서비스가 커지고 팀이 늘어날 때 시작된다. 이 시점의 병목은 Django 자체보다 경계가 흐린 구조에서 더 자주 나온다. 책임이 섞인 채로 배포 단위가 커지면 변경 영향 범위가 과도하게 넓어지고, 도메인별로 필요한 판단도 계속 충돌한다. 그래서 언어를 바꿀지보다 먼저, 무엇을 어디까지 분리할지부터 다시 보게 됐다.

최근에는 Django에 붙어 있던 API를 하나씩 Go로 옮기고 있다. 해보면 의외로 새로 타이핑하는 코드는 많지 않다. 로직 이관보다 더 큰 일은 분리 이후의 처리 방식을 정리하는 것이다. 요청을 바로 처리하던 흐름을 대기열에 넣고 모아서 bulk insert 하려는 것도 같은 이유다. 핵심은 Go냐 Django냐가 아니라, 병목이 생기는 경로를 독립된 단위로 떼어낼 수 있느냐였다. 분리 그 자체에서 오는 운영상의 명확함이 실제로 컸다.

MSA도 같은 기준으로 봐야 한다고 느꼈다. 도메인이 어느 정도 안정되어 있고 고가용성 요구가 크며, 각 영역의 지식량이 이미 커졌다면 분리의 이점이 분명하다. 반대로 나눌 기준이 약한 상태에서 서비스만 잘게 쪼개면 결국 함께 배포해야 하는 애매한 마이크로서비스가 늘어난다. 겉으로는 나뉘었는데 실제 배포와 장애 영향은 묶여 있는 상태다. 이런 경우에는 플랫폼만 복잡해지고 팀의 피로도만 올라간다.

실무에서 먼저 확인할 질문은 단순하다. 어떤 변경이 어떤 팀의 배포를 막는지, 장애가 났을 때 어디까지 격리되는지, 도메인 지식의 경계가 팀 경계와 맞는지다. 이 기준이 서면 Django로 떼든 Go로 떼든 선택의 차이는 생각보다 작다. 반대로 기준이 없으면 어떤 프레임워크를 써도 같은 문제가 반복된다. 내가 정리한 결론은 하나다. 프레임워크를 논하기 전에 서비스 경계와 배포 단위를 먼저 설계해야 한다.
